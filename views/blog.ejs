<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog - Fastqash Agencies</title>
  <meta name="description" content="Read the latest news, tips, and updates from Fastqash Agencies">
  <meta name="keywords" content="Fastqash, Blog, News, Updates, Financial Freedom, Community, Success Stories">
  <meta name="author" content="Fastqash Agencies">
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="Blog - Fastqash Agencies">
  <meta property="og:description" content="Read the latest news, tips, and updates from Fastqash Agencies">
  <meta property="og:image" content="https://fastqashagencies.com/images/og-image.png">
  <meta property="og:url" content="https://fastqashagencies.com/blog">
  <meta property="og:type" content="website">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Blog - Fastqash Agencies">
  <meta name="twitter:description" content="Read the latest news, tips, and updates from Fastqash Agencies">
  <meta name="twitter:image" content="https://fastqashagencies.com/images/og-image.jpg">

  <!-- favicon-->
  <link rel="icon" href="/images/favicon.PNG" type="image/x-icon">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
        /* Reuse the same styles from the homepage */
        :root {
            --primary: #2c3e50;
            --secondary: #e74c3c;
            --accent: #3498db;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            color: #333;
            padding-top: 80px;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        
        .navbar {
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            background-color: white;
            padding: 15px 0;
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .navbar-brand span {
            color: var(--secondary);
        }
        
        .nav-link {
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
        }
        
        .nav-link:hover {
            color: var(--secondary);
        }
        
        .btn-primary {
            background-color: var(--secondary);
            border-color: var(--secondary);
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background-color: #c0392b;
            border-color: #c0392b;
            transform: translateY(-2px);
        }
        
        .blog-hero {
            background: linear-gradient(rgba(44, 62, 80, 0.8), rgba(44, 62, 80, 0.8)), url('https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 60px 0;
            margin-bottom: 30px;
        }
        
        .section-title {
            position: relative;
            margin-bottom: 20px;
            padding-bottom: 15px;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background-color: var(--secondary);
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .card-img-top {
            height: 200px;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .card:hover .card-img-top {
            transform: scale(1.05);
        }
        
        .category-filter {
            margin-bottom: 30px;
        }
        
        .category-btn {
            margin: 5px;
        }
        /* Blog Hero - smaller height */
.blog-hero {
    background: linear-gradient(rgba(44, 62, 80, 0.8), rgba(44, 62, 80, 0.8)), url('https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
    background-size: cover;
    background-position: center;
    color: white;
    padding: 60px 0; /* Reduced from 100px */
    margin-bottom: 30px; /* Reduced from 50px */
}

/* Reduce gap between section title and search bar */
.section-title {
    position: relative;
    margin-bottom: 20px; /* Reduced from 40px */
    padding-bottom: 15px;
}

/* Search bar styling */
#search-input {
    height: 50px;
    border-radius: 30px;
    border: 2px solid var(--secondary);
    padding: 0 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    font-size: 1rem;
    transition: all 0.3s;
}

#search-input:focus {
    border-color: var(--accent);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    outline: none;
}

        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 60px 0 30px;
        }
        
        footer a {
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        footer a:hover {
            color: white;
        }
        
        .social-icon {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            margin-right: 10px;
            transition: all 0.3s;
        }
        
        .social-icon:hover {
            background: var(--secondary);
            transform: translateY(-3px);
        }
        .whatsapp-float {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 40px;
            right: 40px;
            background-color: #25d366;
            color: white;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .whatsapp-float:hover {
            background-color: #128c7e;
            transform: scale(1.05);
        }
        
        @media (max-width: 768px) {
            .blog-hero {
                padding: 60px 0;
            }
            
            .whatsapp-float {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
                font-size: 24px;
            }
            
            .card-img-top {
                height: 160px;
            }
        }
    </style>
</head>
<body>
  <!-- Navbar -->
  <%- include('partials/navbar') %>

  <!-- Blog Hero -->
  <section class="blog-hero text-center">
    <div class="container">
      <h1 class="display-4 fw-bold mb-4">Fastqash Blog</h1>
      <p class="lead">Stay updated with the latest news, tips, and success stories from the Fastqash community</p>
    </div>
  </section>

  <!-- Blog Posts -->
  <section class="py-5">
    <div class="container">
      <h2 id="section-title"   class="section-title">Latest Posts</h2>

      <!-- 🔍 Search Bar -->
      <div class="row mb-3">
        <div class="col-md-6 mx-auto">
          <input id="search-input" class="form-control" type="search" placeholder="Search posts...">
        </div>
      </div>

      <!-- ✅ Spinner -->
      <div id="spinner" class="text-center my-5" style="display: none;">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- 📌 Posts Container -->
      <div id="posts-container" class="row g-4"></div>

      <!-- 📄 Pagination -->
      <div id="pagination-container" class="pagination mt-4 text-center"></div>
    </div>
  </section>

  <!-- Footer -->
  <%- include('partials/footer') %>

  <!-- WhatsApp Float -->
  <a href="https://wa.me/254742381320?text=Hi.%20My%20name%20is%20.....,%20I%20would%20like%20to%20join%20FastQash.%20Please%20guide%20me." target="_blank" class="whatsapp-float">
    <i class="fab fa-whatsapp"></i>
  </a>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.getElementById("search-input");
    const postsContainer = document.getElementById("posts-container");
    const paginationContainer = document.getElementById("pagination-container");
    const spinner = document.getElementById("spinner");
    const sectionTitle = document.getElementById("section-title");

    let currentQuery = "";

    // ✅ Debounce helper
    function debounce(func, delay) {
      let timeout;
      return (...args) => {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), delay);
      };
    }

    // ✅ Fetch posts
    async function fetchPosts(page = 1, isPagination = false) {
      try {
        spinner.style.display = "block";
        postsContainer.innerHTML = "";

        // 👇 Scroll up immediately only when pagination
        if (isPagination) {
          sectionTitle.scrollIntoView({ behavior: "smooth", block: "start" });
        }

        const res = await fetch(`/blog/search?q=${encodeURIComponent(currentQuery)}&page=${page}`);
        const data = await res.json();

        // ⏳ small delay (200ms) before hiding spinner
        setTimeout(() => {
          spinner.style.display = "none";

          postsContainer.innerHTML = data.postsHtml
            ? `<div class="row g-4 animate__animated animate__fadeIn">${data.postsHtml}</div>`
            : `
              <div class="col-12 text-center py-5 no-results animate__animated animate__fadeIn">
                <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                <h3>No posts found</h3>
                <p class="text-muted">Try searching with different keywords.</p>
              </div>
            `;

          paginationContainer.innerHTML = data.paginationHtml || "";
          attachPaginationEvents();
        }, 200);

      } catch (err) {
        console.error(err);
        spinner.style.display = "none";
      }
    }

    // ✅ Attach pagination click events
    function attachPaginationEvents() {
      const links = paginationContainer.querySelectorAll("a[data-page]");
      links.forEach(link => {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          const page = this.getAttribute("data-page");
          fetchPosts(page, true); // 👈 flag = pagination
        });
      });
    }

    // ✅ Live search
    searchInput.addEventListener("input", debounce((e) => {
      currentQuery = e.target.value.trim();
      fetchPosts(1, false); // 👈 flag = search
    }, 300));

   

    // Initial load
    fetchPosts(1, false);
  });
</script>

</body>
</html>
